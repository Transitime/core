<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Thu Sep 11 10:18:47 PDT 2014 -->
<title>AvlProcessor</title>
<meta name="date" content="2014-09-11">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AvlProcessor";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AvlProcessor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/transitime/core/ArrivalDepartureGeneratorFactory.html" title="class in org.transitime.core"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/transitime/core/BlockAssigner.html" title="class in org.transitime.core"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/transitime/core/AvlProcessor.html" target="_top">Frames</a></li>
<li><a href="AvlProcessor.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.transitime.core</div>
<h2 title="Class AvlProcessor" class="title">Class AvlProcessor</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.transitime.core.AvlProcessor</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">AvlProcessor</span>
extends java.lang.Object</pre>
<div class="block">This is a very important high-level class. It takes the AVL data and
 processes it. Matches vehicles to their assignments. Once a match is made
 then MatchProcessor class is used to generate predictions, arrival/departure
 times, headway, etc.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>SkiBu Smith</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../org/transitime/core/AvlProcessor.html" title="class in org.transitime.core">AvlProcessor</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/core/AvlProcessor.html#getInstance()">getInstance</a></strong>()</code>
<div class="block">Returns the singleton AvlProcessor</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/core/AvlProcessor.html#lowLevelProcessAvlReport(org.transitime.db.structs.AvlReport, boolean)">lowLevelProcessAvlReport</a></strong>(<a href="../../../org/transitime/db/structs/AvlReport.html" title="class in org.transitime.db.structs">AvlReport</a>&nbsp;avlReport,
                        boolean&nbsp;rescursiveCall)</code>
<div class="block">Processes the AVL report by matching to the assignment and generating
 predictions and such.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/core/AvlProcessor.html#makeVehicleUnpredictable(java.lang.String)">makeVehicleUnpredictable</a></strong>(java.lang.String&nbsp;vehicleId)</code>
<div class="block">Removes predictions and the match for the vehicle and marks
 it as unpredictable.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/core/AvlProcessor.html#makeVehicleUnpredictableAndRemoveAssignment(org.transitime.core.VehicleState)">makeVehicleUnpredictableAndRemoveAssignment</a></strong>(<a href="../../../org/transitime/core/VehicleState.html" title="class in org.transitime.core">VehicleState</a>&nbsp;vehicleState)</code>
<div class="block">Removes predictions and the match for the vehicle and marks
 is as unpredictable.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/transitime/core/TemporalMatch.html" title="class in org.transitime.core">TemporalMatch</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/core/AvlProcessor.html#matchNewFixForPredictableVehicle(org.transitime.core.VehicleState)">matchNewFixForPredictableVehicle</a></strong>(<a href="../../../org/transitime/core/VehicleState.html" title="class in org.transitime.core">VehicleState</a>&nbsp;vehicleState)</code>
<div class="block">For vehicles that were already predictable but then got a new AvlReport.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/core/AvlProcessor.html#matchVehicleToAssignment(org.transitime.core.VehicleState)">matchVehicleToAssignment</a></strong>(<a href="../../../org/transitime/core/VehicleState.html" title="class in org.transitime.core">VehicleState</a>&nbsp;vehicleState)</code>
<div class="block">To be called when vehicle doesn't already have a block assignment or the
 vehicle is being reassigned.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/core/AvlProcessor.html#processAvlReport(org.transitime.db.structs.AvlReport)">processAvlReport</a></strong>(<a href="../../../org/transitime/db/structs/AvlReport.html" title="class in org.transitime.db.structs">AvlReport</a>&nbsp;avlReport)</code>
<div class="block">First does housekeeping for the AvlReport (stores it in db, logs it,
 etc).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getInstance()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre>public static&nbsp;<a href="../../../org/transitime/core/AvlProcessor.html" title="class in org.transitime.core">AvlProcessor</a>&nbsp;getInstance()</pre>
<div class="block">Returns the singleton AvlProcessor</div>
<dl><dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="makeVehicleUnpredictable(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeVehicleUnpredictable</h4>
<pre>public&nbsp;void&nbsp;makeVehicleUnpredictable(java.lang.String&nbsp;vehicleId)</pre>
<div class="block">Removes predictions and the match for the vehicle and marks
 it as unpredictable.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vehicleId</code> - The vehicle to be made unpredictable</dd></dl>
</li>
</ul>
<a name="makeVehicleUnpredictableAndRemoveAssignment(org.transitime.core.VehicleState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeVehicleUnpredictableAndRemoveAssignment</h4>
<pre>public&nbsp;void&nbsp;makeVehicleUnpredictableAndRemoveAssignment(<a href="../../../org/transitime/core/VehicleState.html" title="class in org.transitime.core">VehicleState</a>&nbsp;vehicleState)</pre>
<div class="block">Removes predictions and the match for the vehicle and marks
 is as unpredictable. Also removes block assignment from the
 vehicleState.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vehicleState</code> - The vehicle to be made unpredictable</dd></dl>
</li>
</ul>
<a name="matchNewFixForPredictableVehicle(org.transitime.core.VehicleState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>matchNewFixForPredictableVehicle</h4>
<pre>public&nbsp;<a href="../../../org/transitime/core/TemporalMatch.html" title="class in org.transitime.core">TemporalMatch</a>&nbsp;matchNewFixForPredictableVehicle(<a href="../../../org/transitime/core/VehicleState.html" title="class in org.transitime.core">VehicleState</a>&nbsp;vehicleState)</pre>
<div class="block">For vehicles that were already predictable but then got a new AvlReport.
 Determines where in the block assignment the vehicle now matches to.
 Starts at the previous match and then looks ahead from there to find
 good spatial matches. Then determines which spatial match is best by
 looking at temporal match. Updates the vehicleState with the resulting
 best temporal match.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vehicleState</code> - the previous vehicle state</dd>
<dt><span class="strong">Returns:</span></dt><dd>the new match, if successful. Otherwise null.</dd></dl>
</li>
</ul>
<a name="matchVehicleToAssignment(org.transitime.core.VehicleState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>matchVehicleToAssignment</h4>
<pre>public&nbsp;boolean&nbsp;matchVehicleToAssignment(<a href="../../../org/transitime/core/VehicleState.html" title="class in org.transitime.core">VehicleState</a>&nbsp;vehicleState)</pre>
<div class="block">To be called when vehicle doesn't already have a block assignment or the
 vehicle is being reassigned. Uses block assignment from the AvlReport to
 try to match the vehicle to the assignment. If successful then the
 vehicle can be made predictable. The AvlReport is obtained from the
 vehicleState parameter.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>avlReport</code> - </dd><dd><code>vehicleState</code> - provides current AvlReport plus is updated by this method with
            the new state.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if successfully assigned vehicle</dd></dl>
</li>
</ul>
<a name="lowLevelProcessAvlReport(org.transitime.db.structs.AvlReport, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lowLevelProcessAvlReport</h4>
<pre>public&nbsp;void&nbsp;lowLevelProcessAvlReport(<a href="../../../org/transitime/db/structs/AvlReport.html" title="class in org.transitime.db.structs">AvlReport</a>&nbsp;avlReport,
                            boolean&nbsp;rescursiveCall)</pre>
<div class="block">Processes the AVL report by matching to the assignment and generating
 predictions and such. Sets VehicleState for the vehicle based on the
 results. Also stores AVL report into the database (if not in playback
 mode).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>avlReport</code> - The new AVL report to be processed</dd><dd><code>rescursiveCall</code> - Set to true if this method is calling itself. Used to make
            sure that any bug can't cause infinite recursion.</dd></dl>
</li>
</ul>
<a name="processAvlReport(org.transitime.db.structs.AvlReport)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>processAvlReport</h4>
<pre>public&nbsp;void&nbsp;processAvlReport(<a href="../../../org/transitime/db/structs/AvlReport.html" title="class in org.transitime.db.structs">AvlReport</a>&nbsp;avlReport)</pre>
<div class="block">First does housekeeping for the AvlReport (stores it in db, logs it,
 etc). Processes the AVL report by matching to the assignment and
 generating predictions and such. Sets VehicleState for the vehicle based
 on the results. Also stores AVL report into the database (if not in
 playback mode).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>avlReport</code> - The new AVL report to be processed</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AvlProcessor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/transitime/core/ArrivalDepartureGeneratorFactory.html" title="class in org.transitime.core"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/transitime/core/BlockAssigner.html" title="class in org.transitime.core"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/transitime/core/AvlProcessor.html" target="_top">Frames</a></li>
<li><a href="AvlProcessor.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
